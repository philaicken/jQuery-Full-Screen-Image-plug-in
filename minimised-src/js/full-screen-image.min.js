// JavaScript Document
// Author: The Engine Room - Michael Tempest
// blog.propcom.co.uk
// jQuery Full Screen Image plug-in
// version 1.01
(function(b){var a=0,c=0,d=0;b.fn.fullSizeImage=function(e,f){var h=b.extend({},b.fn.fullSizeImage.defaults,e),i=this,g=this.find("img"),j=new Array();if(a==0){c=g.height();d=g.width()}i.init=function(){a++;if(h.offset!=null){j=h.offset.split(",")}if(h.position=="fixed"){if(b.browser.msie&&b.browser.version.substr(0,1)<7){i.css({position:"absolute",left:parseInt(j[0]),top:parseInt(j[1])});b(window).bind("scroll",function(){i.scrollPage()})}else{i.css("position","fixed")}}i.resizeImage();b(window).bind("resize",function(){i.resizeImage()})};i.scrollPage=function(){i.css({top:b(window).scrollTop()})};i.repositionImage=function(){if(h.offset!=null){if(h.position!="fixed"){g.css({left:((b(window).width()-parseInt(j[0]))-g.width())/2,top:((b(document).height()-parseInt(j[1]))-g.height())/2})}else{g.css({left:((b(window).width()-parseInt(j[0]))-g.width())/2,top:((b(window).height()-parseInt(j[1]))-g.height())/2})}}else{if(h.position!="fixed"){g.css({left:(b(window).width()-g.width())/2,top:(b(document).height()-g.height())/2})}else{g.css({left:(b(window).width()-g.width())/2,top:(b(window).height()-g.height())/2})}}};i.resizeImage=function(){imageRatio=g.width()/g.height();if(g.width()>b(window).width()||g.width()<b(window).width()){if(h.offset!=null){g.css({width:(b(window).width()-parseInt(j[0])),height:(b(window).width()-parseInt(j[0]))/imageRatio})}else{g.css({width:b(window).width(),height:b(window).width()/imageRatio})}}if(g.height()<b(document).height()){if(h.position!="fixed"){if(h.offset!=null){g.css({width:b(document).height()*imageRatio,height:b(document).height()})}else{g.css({width:b(document).height()*imageRatio,height:b(document).height()})}}else{if(h.offset!=null){if((b(window).height()-parseInt(j[1]))*imageRatio>(b(window).width()-parseInt(j[0]))){g.css({width:(b(window).height()-parseInt(j[1]))*imageRatio,height:(b(window).height()-parseInt(j[1]))})}}else{if(b(window).width()>b(window).height()*imageRatio){g.css({width:b(window).width(),height:b(window).width()/imageRatio})}else{g.css({width:b(window).height()*imageRatio,height:b(window).height()})}}}}if(h.offset!=null){i.css({left:parseInt(j[0]),top:parseInt(j[1]),width:(b(window).width()-parseInt(j[0])),height:b(window).height()-parseInt(j[1])})}else{i.css({width:b(window).width(),height:b(window).height()})}if(h.repositionImage==true){i.repositionImage();b(window).bind("resize",function(){i.repositionImage()})}if(h.overlayLine==true){if(g.width()>d&&b("#overlay").size()<1){b("#full-screen-image").append('<div id="overlay">&nbsp;</div>')}if(g.width()<d){b("#overlay").remove()}b("#overlay").css({width:i.width(),height:i.height()})}};i.refreshPlugin=function(k){b(window).unbind("resize");b.extend(h,k);if(h.repositionImage==false){g.css({top:"0",left:"0"})}if(h.overlayLine==false){b("#overlay").remove()}i.init()};if(e=="refresh"){i.refreshPlugin(f)}else{i.init()}};b.fn.fullSizeImage.defaults={repositionImage:true,overlayLine:false,offset:null,position:"fixed"}})(jQuery);